name = "molt-tv-worker"
compatibility_date = "2024-01-01"

main = "src/index.ts"

[durable_objects]
bindings = [
  { name = "STREAMS", class_name = "StreamRoom" },
  { name = "LIMITERS", class_name = "RateLimiter" },
]

# D1 database for stream metadata
[[d1_databases]]
binding = "DB"
database_name = "molt-tv"
database_id = "placeholder-replace-with-real-id"

[[rules]]
type = "Data"
globs = ["**/*.html"]
fallthrough = false

[[migrations]]
tag = "v1"
new_sqlite_classes = ["StreamRoom", "RateLimiter"]

[vars]
# Agent secrets for authentication (override in secrets)
AGENT_SECRET = "dev-secret-change-in-production"
