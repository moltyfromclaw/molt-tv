(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35340,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(94108);function a({streamId:r,title:a,hlsUrl:n}){let l=(0,s.useRef)(null),[i,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let t=l.current;t&&n?t.canPlayType("application/vnd.apple.mpegurl")?(t.src=n,t.addEventListener("loadedmetadata",()=>{x(!1),t.play().catch(()=>o(!1))}),t.addEventListener("error",()=>{m("Failed to load stream"),x(!1)})):e.A(70308).then(({default:e})=>{if(e.isSupported()){let s=new e({enableWorker:!0,lowLatencyMode:!1,liveSyncDurationCount:3,liveMaxLatencyDurationCount:6,liveDurationInfinity:!0,maxBufferLength:30,maxMaxBufferLength:60});return s.loadSource(n),s.attachMedia(t),s.on(e.Events.MANIFEST_PARSED,()=>{x(!1),t.play().catch(()=>o(!1))}),s.on(e.Events.ERROR,(t,r)=>{r.fatal&&(console.log("Fatal HLS error:",r.type,r.details),r.type===e.ErrorTypes.NETWORK_ERROR?(console.log("Network error, attempting recovery..."),setTimeout(()=>{s.loadSource(n),s.startLoad()},2e3)):r.type===e.ErrorTypes.MEDIA_ERROR?(console.log("Media error, attempting recovery..."),s.recoverMediaError()):(m("Stream error: "+r.type),x(!1)))}),()=>s.destroy()}m("HLS not supported in this browser"),x(!1)}):x(!1)},[n]),n)?(0,t.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative group",children:[(0,t.jsx)("video",{ref:l,className:"w-full h-full object-contain",playsInline:!0,muted:d,autoPlay:!0}),h&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})}),u&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"âš ï¸"}),(0,t.jsx)("p",{className:"text-red-400 font-medium",children:u})]}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-red-600 px-2 py-1 rounded text-white text-sm font-medium",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>{let e=l.current;e&&(e.paused?(e.play(),o(!0)):(e.pause(),o(!1)))},className:"text-white hover:text-accent-purple transition-colors",children:i?(0,t.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),(0,t.jsx)("button",{onClick:()=>{let e=l.current;e&&(e.muted=!e.muted,c(e.muted))},className:"text-white hover:text-accent-purple transition-colors",children:d?(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})})]}),(0,t.jsx)("button",{onClick:()=>{let e=l.current;e&&(document.fullscreenElement?document.exitFullscreen():e.requestFullscreen())},className:"text-white hover:text-accent-purple transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z",clipRule:"evenodd"})})})]})})]}):(0,t.jsx)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-surface to-background",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“º"}),(0,t.jsx)("p",{className:"text-foreground font-medium text-lg",children:a}),(0,t.jsxs)("p",{className:"text-muted text-sm mt-2",children:["Stream ID: ",r]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-accent-orange",children:[(0,t.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"LIVE"})]}),(0,t.jsx)("p",{className:"text-muted text-xs mt-4",children:"Waiting for stream..."})]})})}e.i(50711);var n=e.i(82045);e.i(90798);var l=e.i(88218),i=e.i(1737),o=e.i(14001),d=e.i(3697);function c(e,t){if("u"<typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(e,JSON.stringify(t)))}async function u(e,t){let s;if("u"<typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{s=await Convex.asyncSyscall(e,JSON.stringify(t))}catch(e){if(void 0!==e.data){let t=new d.ConvexError(e.message);throw t.data=(0,l.jsonToConvex)(e.data),t}throw Error(e.message)}return JSON.parse(s)}e.i(2082);var m=e.i(39197);function h(e,t,s,r){if(void 0===e)throw TypeError(`Must provide arg ${t} \`${r}\` to \`${s}\``)}var x=Object.defineProperty,p=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?x(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s};class f{constructor(){p(this,"_isExpression"),p(this,"_value")}}var v=Object.defineProperty;class g extends f{constructor(e){super(),((e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?v(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s})(this,"inner"),this.inner=e}serialize(){return this.inner}}function b(e){return e instanceof g?e.serialize():{$literal:(0,l.convexOrUndefinedToJson)(e)}}let y={eq:(e,t)=>new g({$eq:[b(e),b(t)]}),neq:(e,t)=>new g({$neq:[b(e),b(t)]}),lt:(e,t)=>new g({$lt:[b(e),b(t)]}),lte:(e,t)=>new g({$lte:[b(e),b(t)]}),gt:(e,t)=>new g({$gt:[b(e),b(t)]}),gte:(e,t)=>new g({$gte:[b(e),b(t)]}),add:(e,t)=>new g({$add:[b(e),b(t)]}),sub:(e,t)=>new g({$sub:[b(e),b(t)]}),mul:(e,t)=>new g({$mul:[b(e),b(t)]}),div:(e,t)=>new g({$div:[b(e),b(t)]}),mod:(e,t)=>new g({$mod:[b(e),b(t)]}),neg:e=>new g({$neg:b(e)}),and:(...e)=>new g({$and:e.map(b)}),or:(...e)=>new g({$or:e.map(b)}),not:e=>new g({$not:b(e)}),field:e=>new g({$field:e})};var j=Object.defineProperty,N=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?j(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s};function w(e){throw Error("consumed"===e?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class S{constructor(e){N(this,"state"),N(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:e},"FullTableScan"===e.source.type?this.tableNameForErrorMessages=e.source.tableName:this.tableNameForErrorMessages=e.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let e=this.state.query;return this.state={type:"closed"},e}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&w(this.state.type);let{queryId:e}=c("1.0/queryStream",{query:this.state.query,version:o.version});return this.state={type:"executing",queryId:e},e}closeQuery(){"executing"===this.state.type&&c("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(e){h(e,1,"order","order");let t=this.takeQuery();if("Search"===t.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==t.source.order)throw Error("Queries may only specify order at most once");return t.source.order=e,new S(t)}filter(e){h(e,1,"filter","predicate");let t=this.takeQuery();if(t.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return t.operators.push({filter:b(e(y))}),new S(t)}limit(e){h(e,1,"limit","n");let t=this.takeQuery();return t.operators.push({limit:e}),new S(t)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&w(this.state.type);let e="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:t,done:s}=await u("1.0/queryStreamNext",{queryId:e});return s&&this.closeQuery(),{value:(0,l.jsonToConvex)(t),done:s}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(h(e,1,"paginate","options"),"number"!=typeof e?.numItems||e.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${e?.numItems}\`.`);let t=this.takeQuery(),s=e.numItems,r=e.cursor,a=e?.endCursor??null,n=e.maximumRowsRead??null,{page:i,isDone:d,continueCursor:c,splitCursor:m,pageStatus:x}=await u("1.0/queryPage",{query:t,cursor:r,endCursor:a,pageSize:s,maximumRowsRead:n,maximumBytesRead:e.maximumBytesRead,version:o.version});return{page:i.map(e=>(0,l.jsonToConvex)(e)),isDone:d,continueCursor:c,splitCursor:m,pageStatus:x}}async collect(){let e=[];for await(let t of this)e.push(t);return e}async take(e){h(e,1,"take","n");if(!Number.isInteger(e)||e<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(e).collect()}async first(){let e=await this.take(1);return 0===e.length?null:e[0]}async unique(){let e=await this.take(2);if(0===e.length)return null;if(2===e.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${e[0]._id}, ${e[1]._id}, ...]`);return e[0]}}i.v.object({numItems:i.v.number(),cursor:i.v.union(i.v.string(),i.v.null()),endCursor:i.v.optional(i.v.union(i.v.string(),i.v.null())),id:i.v.optional(i.v.number()),maximumRowsRead:i.v.optional(i.v.number()),maximumBytesRead:i.v.optional(i.v.number())});var C=e.i(62849),I=Object.defineProperty,k=Object.defineProperty,E=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?k(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s};class R{constructor(e){E(this,"indexes"),E(this,"stagedDbIndexes"),E(this,"searchIndexes"),E(this,"stagedSearchIndexes"),E(this,"vectorIndexes"),E(this,"stagedVectorIndexes"),E(this,"validator"),this.indexes=[],this.stagedDbIndexes=[],this.searchIndexes=[],this.stagedSearchIndexes=[],this.vectorIndexes=[],this.stagedVectorIndexes=[],this.validator=e}" indexes"(){return this.indexes}index(e,t){return Array.isArray(t)?this.indexes.push({indexDescriptor:e,fields:t}):t.staged?this.stagedDbIndexes.push({indexDescriptor:e,fields:t.fields}):this.indexes.push({indexDescriptor:e,fields:t.fields}),this}searchIndex(e,t){return t.staged?this.stagedSearchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}):this.searchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}),this}vectorIndex(e,t){return t.staged?this.stagedVectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}):this.vectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}),this}self(){return this}export(){let e=this.validator.json;if("object"!=typeof e)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,stagedDbIndexes:this.stagedDbIndexes,searchIndexes:this.searchIndexes,stagedSearchIndexes:this.stagedSearchIndexes,vectorIndexes:this.vectorIndexes,stagedVectorIndexes:this.stagedVectorIndexes,documentType:e}}}function $(e){return new R((0,i.isValidator)(e)?e:i.v.object(e))}new class e{constructor(e,t){E(this,"tables"),E(this,"strictTableNameTypes"),E(this,"schemaValidation"),this.tables=e,this.schemaValidation=t?.schemaValidation===void 0||t.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,t])=>{let{indexes:s,stagedDbIndexes:r,searchIndexes:a,stagedSearchIndexes:n,vectorIndexes:l,stagedVectorIndexes:i,documentType:o}=t.export();return{tableName:e,indexes:s,stagedDbIndexes:r,searchIndexes:a,stagedSearchIndexes:n,vectorIndexes:l,stagedVectorIndexes:i,documentType:o}}),schemaValidation:this.schemaValidation})}}({_scheduled_functions:$({name:i.v.string(),args:i.v.array(i.v.any()),scheduledTime:i.v.float64(),completedTime:i.v.optional(i.v.float64()),state:i.v.union(i.v.object({kind:i.v.literal("pending")}),i.v.object({kind:i.v.literal("inProgress")}),i.v.object({kind:i.v.literal("success")}),i.v.object({kind:i.v.literal("failed"),error:i.v.string()}),i.v.object({kind:i.v.literal("canceled")}))}),_storage:$({sha256:i.v.string(),size:i.v.float64(),contentType:i.v.optional(i.v.string())})},void 0);let F=C.anyApi;function M({streamId:e,onPayPromptClick:r}){let[a,l]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),d=(0,s.useRef)(null),c=(0,n.useQuery)(F.messages.list,{streamId:e,limit:100}),u=(0,n.useMutation)(F.messages.send);(0,s.useEffect)(()=>{let e=localStorage.getItem("molt-username");if(e)o(e);else{let e=`user_${Math.random().toString(36).substring(2,8)}`;o(e),localStorage.setItem("molt-username",e)}},[]),(0,s.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[c]);let m=async()=>{if(a.trim()&&i)try{await u({streamId:e,sender:i,content:a.trim(),type:"chat"}),l("")}catch(e){console.error("Failed to send message:",e)}},h=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),x=e=>{switch(e){case"paid_prompt":return"bg-accent-orange/10 border border-accent-orange/30";case"agent":return"bg-accent-purple/10 border border-accent-purple/30";case"system":return"bg-muted/20 text-muted italic";default:return"bg-surface-hover"}},p=e=>{switch(e){case"paid_prompt":return"text-accent-orange";case"agent":return"text-accent-purple font-bold";default:return"text-muted"}},f=void 0!==c;return(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-lg flex flex-col h-[600px]",children:[(0,t.jsxs)("div",{className:"p-3 border-b border-border flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Stream Chat"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${f?"bg-success":"bg-muted"}`}),(0,t.jsx)("span",{className:"text-xs text-muted",children:f?"Connected":"Connecting..."})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[!c&&(0,t.jsx)("div",{className:"text-center text-muted text-sm py-8",children:"Loading messages..."}),c?.length===0&&(0,t.jsx)("div",{className:"text-center text-muted text-sm py-8",children:"No messages yet. Say hello! ðŸ‘‹"}),c?.map(e=>{let s="agent"!==e.type&&"system"!==e.type?c.find(t=>"agent"===t.type&&t.inReplyTo===e._id):null;return"agent"===e.type&&e.inReplyTo?null:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:`rounded p-2 ${x(e.type)} ${s?"opacity-70":""}`,children:["paid_prompt"===e.type&&(0,t.jsxs)("div",{className:"text-accent-orange text-xs font-semibold mb-1",children:["ðŸ’° Paid Prompt ",e.amount?`($${e.amount})`:""]}),"system"===e.type?(0,t.jsx)("div",{className:"text-center text-sm",children:e.content}):(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)("span",{className:`font-semibold text-sm ${p(e.type)}`,children:["agent"===e.type?"ðŸ¦Ž ":"",e.sender,":"]}),(0,t.jsx)("span",{className:"text-foreground text-sm flex-1",children:e.content}),(0,t.jsx)("span",{className:"text-muted text-xs",children:h(e.timestamp)})]})]}),e.pendingReply&&!s&&(0,t.jsxs)("div",{className:"ml-4 flex items-center gap-2 text-muted text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-accent-purple rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-accent-purple rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-accent-purple rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,t.jsx)("span",{className:"text-xs",children:"Molty is typing..."})]}),s&&(0,t.jsx)("div",{className:`ml-4 rounded p-2 ${x("agent")} border-l-2 border-accent-purple`,children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)("span",{className:`font-semibold text-sm ${p("agent")}`,children:["ðŸ¦Ž ",s.sender,":"]}),(0,t.jsx)("span",{className:"text-foreground text-sm flex-1",children:s.content}),(0,t.jsx)("span",{className:"text-muted text-xs",children:h(s.timestamp)})]})})]},e._id)}),(0,t.jsx)("div",{ref:d})]}),(0,t.jsxs)("div",{className:"p-3 border-t border-border space-y-2",children:[(0,t.jsxs)("button",{onClick:r,className:"w-full bg-accent-orange hover:bg-accent-orange-hover text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{children:"ðŸ’°"}),"Pay to Prompt (request action)"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),placeholder:f?"Send a message...":"Connecting...",disabled:!f,className:"flex-1 bg-surface-hover border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted focus:outline-none focus:border-accent-purple disabled:opacity-50"}),(0,t.jsx)("button",{onClick:m,disabled:!f||!a.trim(),className:"bg-accent-purple hover:bg-accent-purple-hover disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Send"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted text-center",children:["Chatting as ",(0,t.jsx)("span",{className:"font-medium",children:i||"..."})]})]})]})}C.anyApi,function e(t,s){return new Proxy({},{get(r,a){if("string"==typeof a)return e(t,[...s,a]);if(a===m.toReferencePath){if(s.length<1){let e=[t,...s].join(".");throw Error(`API path is expected to be of the form \`${t}.childComponent.functionName\`. Found: \`${e}\``)}return"_reference/childComponent/"+s.join("/")}}})}("components",[]);let T=[1,5,10,25];function L({streamId:e,isOpen:a,onClose:n}){let[l,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(5),[c,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,p]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1);if(!a)return null;let g=async t=>{if(t.preventDefault(),l.trim()&&m.trim()){p(!0);try{let t=c?parseFloat(c):o;(await (0,r.submitPaidPrompt)(e,l,t,m)).success&&(v(!0),setTimeout(()=>{n(),v(!1),i(""),h(""),d(5),u("")},2e3))}catch(e){console.error("Failed to submit prompt:",e)}finally{p(!1)}}},b=c?parseFloat(c)||0:o;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl max-w-md w-full p-6 relative",children:[(0,t.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-muted hover:text-foreground transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Prompt Sent!"}),(0,t.jsx)("p",{className:"text-muted",children:"The agent will respond to your prompt soon."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-1",children:"ðŸ’° Pay to Prompt"}),(0,t.jsx)("p",{className:"text-muted text-sm mb-6",children:"Send a paid prompt to the AI agent"}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Your Name"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Display name",className:"w-full bg-surface-hover border border-border rounded-lg px-3 py-2 text-foreground placeholder:text-muted focus:outline-none focus:border-accent-purple",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Your Prompt"}),(0,t.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),placeholder:"What would you like the agent to do?",rows:3,className:"w-full bg-surface-hover border border-border rounded-lg px-3 py-2 text-foreground placeholder:text-muted focus:outline-none focus:border-accent-purple resize-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Amount"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-2",children:T.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{d(e),u("")},className:`py-2 rounded-lg font-medium transition-colors ${o===e&&!c?"bg-accent-orange text-white":"bg-surface-hover text-foreground hover:bg-border"}`,children:["$",e]},e))}),(0,t.jsx)("input",{type:"number",value:c,onChange:e=>u(e.target.value),placeholder:"Custom amount",min:"1",step:"0.01",className:"w-full bg-surface-hover border border-border rounded-lg px-3 py-2 text-foreground placeholder:text-muted focus:outline-none focus:border-accent-purple"})]}),(0,t.jsx)("button",{type:"submit",disabled:x||!l.trim()||!m.trim()||b<=0,className:"w-full bg-accent-orange hover:bg-accent-orange-hover disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:["Send $",b.toFixed(2)," Prompt"]})})]})]})]})})}var P=e.i(22016);function q({params:e}){let n=(0,s.use)(e),[l,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(0,r.getStream)(n.id).then(e=>{i(e),d(!1)})},[n.id]),o)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})}):l?(0,t.jsxs)("div",{className:"min-h-screen pb-8",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)(P.default,{href:"/",className:"text-muted hover:text-foreground transition-colors text-sm flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to streams"]})}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsx)(a,{streamId:l.id,title:l.title,hlsUrl:l.hlsUrl}),(0,t.jsx)("div",{className:"bg-surface border border-border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-accent-purple flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:l.agentName.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-foreground truncate",children:l.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,t.jsx)("span",{className:"text-accent-purple font-medium",children:l.agentName}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted text-sm",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),l.viewerCount.toLocaleString()," watching"]}),l.isLive&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-red-500 text-sm",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"LIVE"]})]})]})]})})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(M,{streamId:l.id,onPayPromptClick:()=>u(!0)})})]})]}),(0,t.jsx)(L,{streamId:l.id,isOpen:c,onClose:()=>u(!1)})]}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ˜•"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Stream not found"}),(0,t.jsx)("p",{className:"text-muted mb-6",children:"This stream doesn't exist or has ended."}),(0,t.jsx)(P.default,{href:"/",className:"bg-accent-purple hover:bg-accent-purple-hover text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"Back to Home"})]})}e.s(["default",()=>q],35340)}]);